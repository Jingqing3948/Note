---
title: 北邮国院项目：创新思维实践 C语言五子棋
date: 2021-07-25
tags: 
- C
categories:
- 邮途（北邮国院课内学习）
- Project
description: 北京邮电大学国际学院物联网工程专业创新思维实践大作业C语言五子棋项目整理
---

这次看了几位大佬的做法，我们也做了很多修改尝试。算是第一次尝试合作完成项目。
我认为学到的东西：
1. 第一次尝试写项目，把函数分到不同的.c文件中后更好看了一些。
2. 在研究过程中应该分清主次。代码正确运行才是基础要求，其他什么美化界面，调字体调颜色都并非重点。（8月4日更新：评价算法的五个特性，正确性，简明性，健壮性，效率，最优性）
3. 从代码中学到的，①是采用落子数来判断该轮到黑方下还是白方下（落子数为2的倍数时黑方下，否则白方下），这样也能判断出是哪一方胜利，而且落子数还可以判断棋盘是否下满（==16*16时棋盘落满，平局） ②是胜利条件的判断，以中间子为参考，看两边的四个子是否和他颜色相同。
4. 8月4日更新：在这次尝试中在文件中使用了全局变量，不同文件中用extern调用。但是在后来学习中意识到全局变量最好不要写在文件里，会增加耦合性。以后多人合作写不同函数的时候也要注意，尽量不要出现。

## 规则
在一个16\*16的棋盘上，黑白双方交替落子，每次落下子后如果棋盘上出现了五个同色棋子横向/竖向/斜向连接，则该方胜利。如果在棋盘下满后（即下了16\*16个子后）仍未分出胜负，则为平局。

## 逻辑

初始化棋盘，是一个`16*16`的二维数组（定义宏 N=16），一开始每一格都初始化为0。用一个不断++的落子数变量%2来判断本回合是黑方下还是白方下，；每次玩家输入横纵坐标，该处的变量值改变（黑子为1，白子为2）。每次落子判断全盘是否有五子连珠，如果有则结束游戏，如果没有则继续下。当落子数达到`N*N`即棋盘下满，还没有出现五子连珠时，则判断为平局，结束游戏。


## 五子棋胜负条件判断

判断原理:

胜负的判断是在每颗棋子落下之后进行，所以用这一子的坐标为基准前后左右斜各个方向来看是否取胜。

具体思想:

按照五子棋规则，当一方的棋子，在横向，纵向或斜向连续五个均为同一用户的棋子时，代表胜利。

另外，胜利判断只需要在一个新子落子时判断，且仅需要判断新子所在的四条线上(纵横加两个斜线)是否满足条件即可。

所以，可以以新子坐标为基准点，判断四次。

比如横向的，需要判断左侧和右侧连续的同类棋子个数，如果左侧+右侧+1（自身）总数>=5，则为胜利。

在判断胜利的时候,首先我们要排除空子的情况,然后当两个斜线的时候, 无胜情况下，判断直线,当为两斜线及直线无胜情况下，判断横线。

参考代码如下：

```c
int win()
{
	extern int arr[100][100];
	int k = 0,l = 0;
	int flag = 0; 
	for(k=2;k<N-2;k++) 
		for(l=2;l<N-2;l++)
		{
			if(arr[k][l]!=0&&arr[k-2][l-2]==arr[k][l]&&arr[k-1][l-1]==arr[k][l]&&arr[k+1][l+1]==arr[k][l]&&arr[k+2][l+2]==arr[k][l])
			{
				flag=1;
				break;
			}
			if(arr[k][l]!=0&&arr[k+2][l-2]==arr[k][l]&&arr[k+1][l-1]==arr[k][l]&&arr[k-1][l+1]==arr[k][l]&&arr[k-2][l+2]==arr[k][l])
			{
				flag=1;
				break;
			}
		}
	if(flag==0) 
		for(k=0;k<N;k++)
			for(l=2;l<N-2;l++)
			{
				if(arr[k][l]!=0&&arr[k][l-2]==arr[k][l]&&arr[k][l-1]==arr[k][l]&&arr[k][l+1]==arr[k][l]&&arr[k][l+2]==arr[k][l])
				{
					flag=1;
					break;
				}
			}
	if(flag==0) 
		for(k=2;k<N-2;k++)
			for(l=0;l<N;l++)
			{
				if(arr[k][l]!=0&&arr[k+2][l]==arr[k][l]&&arr[k+1][l]==arr[k][l]&&arr[k-1][l]==arr[k][l]&&arr[k-2][l]==arr[k][l])
				{
					flag=1;
					break;
				}
			}
	return flag; 
}
```

注:
1.	中的arr[k][l]!=0是排除空子的情况。
2.	最后返回判断结果时, 有胜为1,无为0,谁胜无必要判断，因为，谁尾手了的一定是胜的。
## 演示
开始

 ![ ](https://raw.githubusercontent.com/Jingqing3948/FigureBed/main/mdImages/202505302240094.png)

输入坐标

 ![ ](https://raw.githubusercontent.com/Jingqing3948/FigureBed/main/mdImages/202505302240551.png)

第二回合

 ![ ](https://raw.githubusercontent.com/Jingqing3948/FigureBed/main/mdImages/202505302240027.png)

游戏结束

 ![ ](https://raw.githubusercontent.com/Jingqing3948/FigureBed/main/mdImages/202505302240920.png)